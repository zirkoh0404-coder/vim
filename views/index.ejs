<%- include('partials/navbar') %>

<style>
    @import url('https://fonts.googleapis.com/css2?family=Archivo+Black&family=Inter:wght@300;400;700;900&display=swap');

    body { 
        background-color: #050505; 
        color: #fff; 
        font-family: 'Inter', sans-serif; 
        overflow-x: hidden; 
        letter-spacing: -0.01em;
    }

    .font-sports { font-family: 'Archivo Black', sans-serif; text-transform: uppercase; }

    .bento-card { 
        background: linear-gradient(145deg, rgba(255, 255, 255, 0.03) 0%, rgba(255, 255, 255, 0.01) 100%);
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        border: 1px solid rgba(255, 255, 255, 0.05);
        border-radius: 1.5rem;
        transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1);
        overflow: hidden;
    }

    .bento-card:hover {
        border-color: rgba(59, 130, 246, 0.3);
        background: rgba(255, 255, 255, 0.04);
        transform: translateY(-2px);
    }

    .pro-label {
        background: #3b82f6;
        color: white;
        padding: 4px 10px;
        font-size: 9px;
        font-weight: 900;
        text-transform: uppercase;
        letter-spacing: 0.15em;
        border-radius: 3px;
    }

    .bg-mesh {
        position: fixed; top: 0; left: 0; width: 100%; height: 100%;
        background: radial-gradient(at 0% 0%, rgba(59, 130, 246, 0.12) 0px, transparent 50%),
                    radial-gradient(at 100% 0%, rgba(30, 58, 138, 0.1) 0px, transparent 50%);
        z-index: -1; pointer-events: none;
    }

    /* Custom scroll for professional feel */
    ::-webkit-scrollbar { width: 5px; }
    ::-webkit-scrollbar-thumb { background: #3b82f6; border-radius: 10px; }
</style>

<div class="bg-mesh"></div>

<main class="relative pt-28 pb-32 px-6 max-w-[1400px] mx-auto">
    
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-6 mb-12">
        
        <div class="lg:col-span-8 relative group overflow-hidden rounded-[2.5rem] bg-zinc-900 border border-white/5 h-[500px]">
            <img src="/images/vimgfx.png" class="absolute inset-0 w-full h-full object-cover transition duration-1000 group-hover:scale-105 opacity-40">
            <div class="absolute inset-0 bg-gradient-to-t from-black via-black/40 to-transparent"></div>
            <div class="absolute bottom-12 left-12 right-12">
                <span class="pro-label mb-6 inline-block">Headlines</span>
                <h1 class="text-6xl md:text-8xl font-sports italic leading-[0.9] tracking-tighter mb-6">
                    DOMINATE THE <br><span class="text-blue-500 text-glow">ARENA.</span>
                </h1>
                <p class="text-white/40 text-sm uppercase tracking-[0.3em] max-w-xl font-medium">Professional League Management & Recruitment Hub</p>
            </div>
        </div>

        <div class="lg:col-span-4 grid grid-rows-2 gap-6">
            <div class="bento-card p-8 flex flex-col justify-between border-l-4 border-blue-600">
                <p class="text-[10px] font-black text-blue-500 uppercase tracking-widest">Next Scheduled Event</p>
                <% let nextMatch = matches.find(m => m.status === 'upcoming'); %>
                <% if(nextMatch) { %>
                    <div class="flex items-center gap-4 py-4">
                        <img src="<%= nextMatch.logoA %>" class="w-14 h-14 object-contain filter drop-shadow-xl">
                        <span class="font-sports text-xl text-white/10 italic">VS</span>
                        <img src="<%= nextMatch.logoB %>" class="w-14 h-14 object-contain filter drop-shadow-xl">
                    </div>
                    <h3 class="text-4xl font-sports italic"><%= nextMatch.time %></h3>
                <% } else { %>
                    <h3 class="text-xl font-sports opacity-20 italic">No Games Scheduled</h3>
                <% } %>
            </div>

            <div class="bento-card p-2 bg-black border-none relative group">
                <% if(liveLink && liveLink.trim() !== "") { %>
                    <% 
                        let embedLink = liveLink;
                        if (liveLink.includes('watch?v=')) { embedLink = liveLink.replace('watch?v=', 'embed/').split('&')[0]; }
                        else if (liveLink.includes('youtu.be/')) { embedLink = liveLink.replace('youtu.be/', 'youtube.com/embed/').split('?')[0]; }
                    %>
                    <iframe class="w-full h-full rounded-[1.2rem] opacity-80 group-hover:opacity-100 transition" src="<%= embedLink %>" frameborder="0" allowfullscreen></iframe>
                <% } else { %>
                    <div class="h-full flex flex-col items-center justify-center opacity-30">
                        <div class="w-2 h-2 bg-red-600 rounded-full animate-pulse mb-2"></div>
                        <span class="text-[10px] font-black uppercase tracking-widest">Broadcast Offline</span>
                    </div>
                <% } %>
            </div>
        </div>
    </div>

    <div class="grid grid-cols-2 md:grid-cols-4 gap-6 mb-24">
        <div class="bento-card p-8 group">
            <span class="text-[9px] uppercase tracking-widest opacity-40 font-bold mb-2 block">Total Talent</span>
            <div class="flex items-end justify-between">
                <h4 class="text-5xl font-sports italic text-white group-hover:text-blue-500 transition"><%= players.length %></h4>
                <span class="text-[10px] font-black opacity-10 uppercase">Agents</span>
            </div>
        </div>
        <div class="bento-card p-8 group">
            <span class="text-[9px] uppercase tracking-widest opacity-40 font-bold mb-2 block">Active Fixtures</span>
            <div class="flex items-end justify-between">
                <h4 class="text-5xl font-sports italic text-white group-hover:text-blue-500 transition"><%= matches.length %></h4>
                <span class="text-[10px] font-black opacity-10 uppercase">Matches</span>
            </div>
        </div>
        <div class="bento-card p-8 bg-blue-600/5 border-blue-600/20">
            <span class="text-[9px] uppercase tracking-widest text-blue-400 font-black mb-2 block">Season Status</span>
            <h4 class="text-2xl font-sports italic">REGISTRATION OPEN</h4>
        </div>
        <div class="bento-card p-8">
            <span class="text-[9px] uppercase tracking-widest opacity-40 font-bold mb-2 block">Server Status</span>
            <div class="flex items-center gap-2">
                <div class="w-2 h-2 bg-green-500 rounded-full"></div>
                <h4 class="text-xs font-black italic uppercase">Operational</h4>
            </div>
        </div>
    </div>

    <div class="mb-24">
        <div class="flex justify-between items-center mb-8 border-b border-white/5 pb-4">
            <h2 class="text-2xl font-sports italic"><span class="text-blue-500">Latest</span> Results</h2>
            <a href="/matches" class="text-[10px] font-black uppercase tracking-widest text-white/40 hover:text-blue-500 transition">View Full Archive →</a>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4">
            <% let recentResults = matches.filter(m => m.status === 'completed').reverse().slice(0, 4); %>
            <% if(recentResults.length > 0) { %>
                <% recentResults.forEach(r => { %>
                    <div class="bento-card p-6 border-white/10 hover:bg-white/[0.04]">
                        <div class="flex justify-between items-center mb-6">
                            <span class="text-[8px] font-black text-blue-500 uppercase bg-blue-500/10 px-2 py-1 rounded italic">Final Score</span>
                            <span class="text-[8px] opacity-30 font-bold"><%= r.time %></span>
                        </div>
                        <div class="space-y-4">
                            <div class="flex justify-between items-center">
                                <span class="text-xs font-bold uppercase text-white/60"><%= r.teamA %></span>
                                <span class="text-2xl font-sports italic <%= r.details.goalsA > r.details.goalsB ? 'text-blue-500' : 'text-white' %>"><%= r.details.goalsA %></span>
                            </div>
                            <div class="flex justify-between items-center">
                                <span class="text-xs font-bold uppercase text-white/60"><%= r.teamB %></span>
                                <span class="text-2xl font-sports italic <%= r.details.goalsB > r.details.goalsA ? 'text-blue-500' : 'text-white' %>"><%= r.details.goalsB %></span>
                            </div>
                        </div>
                    </div>
                <% }) %>
            <% } else { %>
                <div class="col-span-full py-12 text-center opacity-10 font-sports text-xl uppercase italic">Waiting for results...</div>
            <% } %>
        </div>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-3 gap-12 mb-32">
        <div class="lg:col-span-1">
            <span class="pro-label mb-4">The Feed</span>
            <h2 class="text-5xl font-sports italic leading-none mb-6">INSIDE <br>THE <span class="text-blue-500">LEAGUE.</span></h2>
            <p class="text-sm text-white/40 leading-relaxed font-medium">The latest transfers, team updates, and community news from the VIM Hub.</p>
        </div>
        <div class="lg:col-span-2 grid grid-cols-1 md:grid-cols-2 gap-8">
            <% if (typeof stories !== 'undefined' && stories.length > 0) { %>
                <% stories.slice().reverse().slice(0, 2).forEach(story => { %>
                    <div class="group cursor-pointer">
                        <div class="rounded-[1.5rem] overflow-hidden aspect-video mb-6 border border-white/5 relative bg-zinc-900">
                            <img src="<%= story.image %>" class="w-full h-full object-cover group-hover:scale-105 transition duration-700 opacity-60">
                            <div class="absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"></div>
                        </div>
                        <h4 class="font-sports italic text-xl group-hover:text-blue-500 transition mb-2"><%= story.title %></h4>
                        <p class="text-xs text-white/40 font-medium leading-relaxed line-clamp-2"><%= story.description %></p>
                    </div>
                <% }) %>
            <% } %>
        </div>
    </div>

    <div class="bento-card p-10 border-dashed border-white/10 bg-transparent mb-40">
        <div class="flex items-center gap-4 mb-10">
            <div class="w-2 h-2 bg-blue-500 rounded-full animate-ping"></div>
            <h2 class="text-[10px] font-black uppercase tracking-[0.5em] text-white/40">Market Intelligence Stream</h2>
        </div>
        <div class="grid grid-cols-1 md:grid-cols-3 gap-y-10 gap-x-12">
            <% let recentPlayers = players.slice(-6).reverse(); %>
            <% recentPlayers.forEach((player, index) => { %>
                <div class="flex items-start gap-4">
                    <span class="text-blue-500 font-sports text-xs mt-1">0<%= index + 1 %></span>
                    <div>
                        <p class="text-xs font-bold uppercase tracking-tight text-white/80"><%= player.name %></p>
                        <p class="text-[9px] text-white/20 uppercase mt-1">Verified for Season Entry</p>
                    </div>
                </div>
            <% }) %>
        </div>
    </div>

    <div class="text-center">
        <h2 class="text-4xl font-sports italic mb-12 opacity-20 tracking-tighter italic">Elite Status Awaits</h2>
        <a href="/market" class="group relative inline-flex items-center gap-6 bg-white text-black px-16 py-6 rounded-full font-black text-xs uppercase tracking-[0.4em] transition-all hover:bg-blue-600 hover:text-white active:scale-95">
            Access The Hub
            <span class="text-xl">→</span>
        </a>
    </div>

</main>

<%- include('partials/footer') %>
